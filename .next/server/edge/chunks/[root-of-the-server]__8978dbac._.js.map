{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 16, "column": 0}, "map": {"version":3,"sources":["turbopack:///[project]/src/middleware.ts"],"sourcesContent":["import { withAuth } from 'next-auth/middleware';\nimport { NextResponse } from 'next/server';\n\nexport default withAuth(\n  function middleware(req) {\n    const url = req.nextUrl.clone();\n    const token = req.nextauth.token;\n    const isMainPage = url.pathname === '/';\n    const hasLoginModal = url.searchParams.get('modal') === 'modal-login';\n\n    // Если нет токена, редирект на главную с открытием модалки логина\n    // if (!token) {\n    //   // Ключи тут как magic strings, потому что тут нельзя использовать из других модулей\n    //   url.pathname = '/';\n    //   url.searchParams.set('modal', 'modal-login');\n\n    //   return NextResponse.redirect(url);\n    // }\n\n    if (!token && !isMainPage) {\n      url.pathname = '/';\n      url.searchParams.set('modal', 'modal-login');\n      return NextResponse.redirect(url);\n    }\n\n    return NextResponse.next();\n  },\n  {\n    callbacks: {\n      // Мы сами смотрим авторизован пользователь или нет\n      authorized: () => true,\n    },\n  },\n);\n\nexport const config = {\n  // matcher: ['/test'],\n  matcher: ['/profile/:path*', '/settings/:path*'],\n};\n"],"names":[],"mappings":";;;;;;AAAA;AACA;AAAA;;;uCAEe,IAAA,8JAAQ,EACrB,SAAS,WAAW,GAAG;IACrB,MAAM,MAAM,IAAI,OAAO,CAAC,KAAK;IAC7B,MAAM,QAAQ,IAAI,QAAQ,CAAC,KAAK;IAChC,MAAM,aAAa,IAAI,QAAQ,KAAK;IACpC,MAAM,gBAAgB,IAAI,YAAY,CAAC,GAAG,CAAC,aAAa;IAExD,kEAAkE;IAClE,gBAAgB;IAChB,yFAAyF;IACzF,wBAAwB;IACxB,kDAAkD;IAElD,uCAAuC;IACvC,IAAI;IAEJ,IAAI,CAAC,SAAS,CAAC,YAAY;QACzB,IAAI,QAAQ,GAAG;QACf,IAAI,YAAY,CAAC,GAAG,CAAC,SAAS;QAC9B,OAAO,gMAAY,CAAC,QAAQ,CAAC;IAC/B;IAEA,OAAO,gMAAY,CAAC,IAAI;AAC1B,GACA;IACE,WAAW;QACT,mDAAmD;QACnD,YAAY,IAAM;IACpB;AACF;AAGK,MAAM,SAAS;IACpB,sBAAsB;IACtB,SAAS;QAAC;QAAmB;KAAmB;AAClD"}}]
}